<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Star Friends</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.js"></script>
    <link rel="stylesheet" href="style.css">
</head>

<body>
        
    <div class="row">
        <div class="container">
            <p class="z-depth-5">
                <span class="flow-text">
                    <h1 class="header">Star Friends!</h1>
                </span>
            </p>
        </div>
    </div>
    <div class="row">
            <div class="input-field col s8">
              <input id="name" type="text" class="validate">
              <label for="password">First Name (Required)</label>
            </div>
    </div>
    <div class="row">
            <div class="input-field col s8">
              <input id="image" type="text" class="validate">
              <label for="password">Link to profile image (Required)</label>
            </div>
    </div>
    <div class="row">
        <div class="col m8 m8">
            <div class="card blue-grey darken-1">
                <div class="card-content white-text">
                    <span class="card-title">You value the wisdom of your parents</span>
                    <span class="card-body">
                        <div class="input-field col s12">
                            <select id="question1">
                                <option value="" disabled selected>Choose your option</option>
                                <option value="1"> 1</option>
                                <option value="2"> 2</option>
                                <option value="3"> 3</option>
                                <option value="4"> 4</option>
                                <option value="5"> 5</option>
                            </select>
                        </div>
                    </span>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col m8 m8">
            <div class="card blue-grey darken-1">
                <div class="card-content white-text">
                    <span class="card-title">You go with your gut</span>
                    <p>
                        <div class="input-field col s12">
                            <select id="question2">
                                <option value="" disabled selected>Choose your option</option>
                                <option value="1"> 1</option>
                                <option value="2"> 2</option>
                                <option value="3"> 3</option>
                                <option value="4"> 4</option>
                                <option value="5"> 5</option>
                            </select>
                        </div>
                    </p>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col m8 m8">
            <div class="card blue-grey darken-1">
                <div class="card-content white-text">
                    <span class="card-title">When faced with a problem, you either 1) run away, or 5) stand and face
                        the problem</span>
                    <p>
                        <div class="input-field col s12">
                            <select id="question3">
                                <option value="" disabled selected>Choose your option</option>
                                <option value="1"> 1</option>
                                <option value="2"> 2</option>
                                <option value="3"> 3</option>
                                <option value="4"> 4</option>
                                <option value="5"> 5</option>
                            </select>
                        </div>
                    </p>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col m8 m8">
            <div class="card blue-grey darken-1">
                <div class="card-content white-text">
                    <span class="card-title">You can talk yourself out of a mess</span>
                    <div class="input-field col s12">
                        <select id="question4">
                            <option value="" disabled selected>Choose your option</option>
                            <option value="1"> 1</option>
                            <option value="2"> 2</option>
                            <option value="3"> 3</option>
                            <option value="4"> 4</option>
                            <option value="5"> 5</option>
                        </select>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col m8 m8">
            <div class="card blue-grey darken-1">
                <div class="card-content white-text">
                    <span class="card-title">You would never betray your loved ones</span>
                    <div class="input-field col s12">
                        <select id="question5">
                            <option value="" disabled selected>Choose your option</option>
                            <option value="1"> 1</option>
                            <option value="2"> 2</option>
                            <option value="3"> 3</option>
                            <option value="4"> 4</option>
                            <option value="5"> 5</option>
                        </select>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col m8 m8">
            <div class="card blue-grey darken-1">
                <div class="card-content white-text">
                    <span class="card-title">You believe in the power of the Force</span>
                    <div class="input-field col s12">
                        <select id="question6">
                            <option value="" disabled selected>Choose your option</option>
                            <option value="1"> 1</option>
                            <option value="2"> 2</option>
                            <option value="3"> 3</option>
                            <option value="4"> 4</option>
                            <option value="5"> 5</option>
                        </select>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col m8 m8">
            <div class="card blue-grey darken-1">
                <div class="card-content white-text">
                    <span class="card-title">You believe in the rule of law and government</span>
                    <div class="input-field col s12">
                        <select id="question7">
                            <option value="" disabled selected>Choose your option</option>
                            <option value="1"> 1</option>
                            <option value="2"> 2</option>
                            <option value="3"> 3</option>
                            <option value="4"> 4</option>
                            <option value="5"> 5</option>
                        </select>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col m8 m8">
            <div class="card blue-grey darken-1">
                <div class="card-content white-text">
                    <span class="card-title">You believe in luck</span>
                    <div class="input-field col s12">
                        <select id="question8">
                            <option value="" disabled selected>Choose your option</option>
                            <option value="1"> 1</option>
                            <option value="2"> 2</option>
                            <option value="3"> 3</option>
                            <option value="4"> 4</option>
                            <option value="5"> 5</option>
                        </select>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col m8 m8">
            <div class="card blue-grey darken-1">
                <div class="card-content white-text">
                    <span class="card-title">You get by with a little help from your friends</span>
                    <div class="input-field col s12">
                        <select id="question9">
                            <option value="" disabled selected>Choose your option</option>
                            <option value="1"> 1</option>
                            <option value="2"> 2</option>
                            <option value="3"> 3</option>
                            <option value="4"> 4</option>
                            <option value="5"> 5</option>
                        </select>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col m8 m8">
            <div class="card blue-grey darken-1">
                <div class="card-content white-text">
                    <span class="card-title">You've got a bad feeling about this</span>
                    <div class="input-field col s12">
                        <select id="question10">
                            <option value="" disabled selected>Choose your option</option>
                            <option value="1"> 1</option>
                            <option value="2"> 2</option>
                            <option value="3"> 3</option>
                            <option value="4"> 4</option>
                            <option value="5"> 5</option>
                        </select>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
            <div class="container">
                <a class="waves-effect waves-light btn modal-trigger" href="#modal1">Submit</a>
            </div>
            <div id="modal1" class="modal modal-fixed-footer">
                    <div class="modal-content">
                            <a class="waves-effect waves-light btn" id="add">Find Your Friend!</a>
                            <h2 id="userName"></h2>
                            <img id="userImg" src="" alt="" height="225" width="225">
                            <h2 id="matchName"></h2>
                            <img id="matchImg" src="" alt="" height="225" width="225">
                    </div>
                    <div class="modal-footer">
                      <a href="#!" class="modal-close waves-effect waves-green btn-flat">Agree</a>
                    </div>
                  </div>
            </div>
    <script>
        $(document).ready(function () {
            $('select').formSelect();
            $('.modal').modal();
        });
        
        
        
        $("#add").on("click", function(event) {
     //event.preventDefault();
     if (($('#name').val() !== "") && ($('#image').val() !== "")) {
               // Create an object for the user's data
               var userData = {
                   name: $("#name").val(),
                   image: $("#image").val(),
                   scores: [$("#question1").val(), $("#question2").val(), $("#question3").val(), $("#question4").val(), $("#question5").val(), $("#question6").val(), $("#question7").val(), $("#question8").val(), $("#question9").val(), $("#question10").val(),]
               }
               console.log(userData);
               $("#userName").append(userData.name);
                   $("#userImg").attr("src", userData.image);
               // AJAX post the data to the friends API.
               $.post("/api/friends", userData).then((data) => {
                   // Grab the result from the AJAX post so that the best match's name and photo are displayed.
                   $("#matchName").append(data.name);
                   $("#matchImg").attr("src", data.photo);
                   // Show the modal with the best match
                   
                   // clear the input fields in the form
                   $("#name").val("");
                   $("#image").val("");
               });
           } else {
               $("<h4>").text("Missing required information");
               $(".modal-content").html("<h3>Please complete the form before submitting</h3>");
               
           }
           return false;
       });
       // modal logic
       //
    


    </script>
</body>

</html>